window.JSCompiler_renameProperty=function(e){return e};let e=0;const t=function(t){let s=t.__mixinApplications;s||(s=new WeakMap,t.__mixinApplications=s);let i=e++;return function(e){let r=e.__mixinSet;if(r&&r[i])return e;let n=s,o=n.get(e);o||(o=t(e),n.set(e,o));let a=Object.create(o.__mixinSet||r||null);return a[i]=!0,o.__mixinSet=a,o}};let s=0,i=0,r=[],n=0,o=document.createTextNode("");new window.MutationObserver(function(){const e=r.length;for(let t=0;t<e;t++){let e=r[t];if(e)try{e()}catch(e){setTimeout(()=>{throw e})}}r.splice(0,e),i+=e}).observe(o,{characterData:!0});const a={run:e=>(o.textContent=n++,r.push(e),s++),cancel(e){const t=e-i;if(t>=0){if(!r[t])throw new Error("invalid async handle: "+e);r[t]=null}}},l=t(e=>{return class extends e{static createProperties(e){const t=this.prototype;for(let s in e)s in t||t._createPropertyAccessor(s)}static attributeNameForProperty(e){return e.toLowerCase()}static typeForProperty(e){}_createPropertyAccessor(e,t){this._addPropertyToAttributeMap(e),this.hasOwnProperty("__dataHasAccessor")||(this.__dataHasAccessor=Object.assign({},this.__dataHasAccessor)),this.__dataHasAccessor[e]||(this.__dataHasAccessor[e]=!0,this._definePropertyAccessor(e,t))}_addPropertyToAttributeMap(e){if(this.hasOwnProperty("__dataAttributes")||(this.__dataAttributes=Object.assign({},this.__dataAttributes)),!this.__dataAttributes[e]){const t=this.constructor.attributeNameForProperty(e);this.__dataAttributes[t]=e}}_definePropertyAccessor(e,t){Object.defineProperty(this,e,{get(){return this._getProperty(e)},set:t?function(){}:function(t){this._setProperty(e,t)}})}constructor(){super(),this.__dataEnabled=!1,this.__dataReady=!1,this.__dataInvalid=!1,this.__data={},this.__dataPending=null,this.__dataOld=null,this.__dataInstanceProps=null,this.__serializing=!1,this._initializeProperties()}ready(){this.__dataReady=!0,this._flushProperties()}_initializeProperties(){for(let e in this.__dataHasAccessor)this.hasOwnProperty(e)&&(this.__dataInstanceProps=this.__dataInstanceProps||{},this.__dataInstanceProps[e]=this[e],delete this[e])}_initializeInstanceProperties(e){Object.assign(this,e)}_setProperty(e,t){this._setPendingProperty(e,t)&&this._invalidateProperties()}_getProperty(e){return this.__data[e]}_setPendingProperty(e,t,s){let i=this.__data[e],r=this._shouldPropertyChange(e,t,i);return r&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),!this.__dataOld||e in this.__dataOld||(this.__dataOld[e]=i),this.__data[e]=t,this.__dataPending[e]=t),r}_invalidateProperties(){!this.__dataInvalid&&this.__dataReady&&(this.__dataInvalid=!0,a.run(()=>{this.__dataInvalid&&(this.__dataInvalid=!1,this._flushProperties())}))}_enableProperties(){this.__dataEnabled||(this.__dataEnabled=!0,this.__dataInstanceProps&&(this._initializeInstanceProperties(this.__dataInstanceProps),this.__dataInstanceProps=null),this.ready())}_flushProperties(){const e=this.__data,t=this.__dataPending,s=this.__dataOld;this._shouldPropertiesChange(e,t,s)&&(this.__dataPending=null,this.__dataOld=null,this._propertiesChanged(e,t,s))}_shouldPropertiesChange(e,t,s){return Boolean(t)}_propertiesChanged(e,t,s){}_shouldPropertyChange(e,t,s){return s!==t&&(s==s||t==t)}attributeChangedCallback(e,t,s,i){t!==s&&this._attributeToProperty(e,s),super.attributeChangedCallback&&super.attributeChangedCallback(e,t,s,i)}_attributeToProperty(e,t,s){if(!this.__serializing){const i=this.__dataAttributes,r=i&&i[e]||e;this[r]=this._deserializeValue(t,s||this.constructor.typeForProperty(r))}}_propertyToAttribute(e,t,s){this.__serializing=!0,this._valueToNodeAttribute(this,s=arguments.length<3?this[e]:s,t||this.constructor.attributeNameForProperty(e)),this.__serializing=!1}_valueToNodeAttribute(e,t,s){const i=this._serializeValue(t);void 0===i?e.removeAttribute(s):e.setAttribute(s,i)}_serializeValue(e){switch(typeof e){case"boolean":return e?"":void 0;default:return null!=e?e.toString():void 0}}_deserializeValue(e,t){switch(t){case Boolean:return null!==e;case Number:return Number(e);default:return e}}}});const h=t(e=>{const t=l(e);function s(e){const t=Object.getPrototypeOf(e);return t.prototype instanceof r?t:null}function i(e){if(!e.hasOwnProperty(JSCompiler_renameProperty("__ownProperties",e))){let t=null;e.hasOwnProperty(JSCompiler_renameProperty("properties",e))&&e.properties&&(t=function(e){const t={};for(let s in e){const i=e[s];t[s]="function"==typeof i?{type:i}:i}return t}(e.properties)),e.__ownProperties=t}return e.__ownProperties}class r extends t{static get observedAttributes(){const e=this._properties;return e?Object.keys(e).map(e=>this.attributeNameForProperty(e)):[]}static finalize(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__finalized",this))){const e=s(this);e&&e.finalize(),this.__finalized=!0,this._finalizeClass()}}static _finalizeClass(){const e=i(this);e&&this.createProperties(e)}static get _properties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__properties",this))){const e=s(this);this.__properties=Object.assign({},e&&e._properties,i(this))}return this.__properties}static typeForProperty(e){const t=this._properties[e];return t&&t.type}_initializeProperties(){this.constructor.finalize(),super._initializeProperties()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this._enableProperties()}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback()}}return r}),c=new Map;class d{constructor(e,t,s,i=V){this.strings=e,this.values=t,this.type=s,this.partCallback=i}getHTML(){const e=this.strings.length-1;let t="",s=!0;for(let i=0;i<e;i++){const e=this.strings[i];t+=e;const r=g(e);t+=(s=r>-1?r<e.length:s)?p:u}return t+=this.strings[e]}getTemplateElement(){const e=document.createElement("template");return e.innerHTML=this.getHTML(),e}}function _(e,t,s=function(e){let t=c.get(e.type);void 0===t&&(t=new Map,c.set(e.type,t));let s=t.get(e.strings);return void 0===s&&(s=new y(e,e.getTemplateElement()),t.set(e.strings,s)),s}){const i=s(e);let r=t.__templateInstance;if(void 0!==r&&r.template===i&&r._partCallback===e.partCallback)return void r.update(e.values);r=new A(i,e.partCallback,s),t.__templateInstance=r;const n=r._clone();r.update(e.values),S(t,t.firstChild),t.appendChild(n)}const u=`{{lit-${String(Math.random()).slice(2)}}}`,p=`\x3c!--${u}--\x3e`,m=new RegExp(`${u}|${p}`),f=/[ \x09\x0a\x0c\x0d]([^\0-\x1F\x7F-\x9F \x09\x0a\x0c\x0d"'>=/]+)[ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*)$/;function g(e){const t=e.lastIndexOf(">");return e.indexOf("<",t+1)>-1?e.length:t}class v{constructor(e,t,s,i,r){this.type=e,this.index=t,this.name=s,this.rawName=i,this.strings=r}}class y{constructor(e,t){this.parts=[],this.element=t;const s=document.createTreeWalker(this.element.content,133,null,!1);let i=-1,r=0;const n=[];let o,a;for(;s.nextNode();){i++,o=a;const t=a=s.currentNode;if(1===t.nodeType){if(!t.hasAttributes())continue;const s=t.attributes;let n=0;for(let e=0;e<s.length;e++)s[e].value.indexOf(u)>=0&&n++;for(;n-- >0;){const n=f.exec(e.strings[r])[1],o=s.getNamedItem(n),a=o.value.split(m);this.parts.push(new v("attribute",i,o.name,n,a)),t.removeAttribute(o.name),r+=a.length-1}}else if(3===t.nodeType){const e=t.nodeValue;if(e.indexOf(u)<0)continue;const s=t.parentNode,o=e.split(m),a=o.length-1;r+=a;for(let e=0;e<a;e++)s.insertBefore(""===o[e]?document.createComment(""):document.createTextNode(o[e]),t),this.parts.push(new v("node",i++));s.insertBefore(""===o[a]?document.createComment(""):document.createTextNode(o[a]),t),n.push(t)}else if(8===t.nodeType&&t.nodeValue===u){const e=t.parentNode,s=t.previousSibling;null===s||s!==o||s.nodeType!==Node.TEXT_NODE?e.insertBefore(document.createComment(""),t):i--,this.parts.push(new v("node",i++)),n.push(t),null===t.nextSibling?e.insertBefore(document.createComment(""),t):i--,a=o,r++}}for(const e of n)e.parentNode.removeChild(e)}}const b=(e,t)=>x(t)?(t=t(e),C):null===t?void 0:t,P=e=>(e.__litDirective=!0,e),x=e=>"function"==typeof e&&!0===e.__litDirective,C={},N=e=>null===e||!("object"==typeof e||"function"==typeof e);class w{constructor(e,t,s,i){this.instance=e,this.element=t,this.name=s,this.strings=i,this.size=i.length-1,this._previousValues=[]}_interpolate(e,t){const s=this.strings,i=s.length-1;let r="";for(let n=0;n<i;n++){r+=s[n];const i=b(this,e[t+n]);if(i&&i!==C&&(Array.isArray(i)||"string"!=typeof i&&i[Symbol.iterator]))for(const e of i)r+=e;else r+=i}return r+s[i]}_equalToPreviousValues(e,t){for(let s=t;s<t+this.size;s++)if(this._previousValues[s]!==e[s]||!N(e[s]))return!1;return!0}setValue(e,t){if(this._equalToPreviousValues(e,t))return;const s=this.strings;let i;2===s.length&&""===s[0]&&""===s[1]?(i=b(this,e[t]),Array.isArray(i)&&(i=i.join(""))):i=this._interpolate(e,t),i!==C&&this.element.setAttribute(this.name,i),this._previousValues=e}}class T{constructor(e,t,s){this.instance=e,this.startNode=t,this.endNode=s,this._previousValue=void 0}setValue(e){if((e=b(this,e))!==C)if(N(e)){if(e===this._previousValue)return;this._setText(e)}else e instanceof d?this._setTemplateResult(e):Array.isArray(e)||e[Symbol.iterator]?this._setIterable(e):e instanceof Node?this._setNode(e):void 0!==e.then?this._setPromise(e):this._setText(e)}_insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}_setNode(e){this._previousValue!==e&&(this.clear(),this._insert(e),this._previousValue=e)}_setText(e){const t=this.startNode.nextSibling;e=void 0===e?"":e,t===this.endNode.previousSibling&&t.nodeType===Node.TEXT_NODE?t.textContent=e:this._setNode(document.createTextNode(e)),this._previousValue=e}_setTemplateResult(e){const t=this.instance._getTemplate(e);let s;this._previousValue&&this._previousValue.template===t?s=this._previousValue:(s=new A(t,this.instance._partCallback,this.instance._getTemplate),this._setNode(s._clone()),this._previousValue=s),s.update(e.values)}_setIterable(e){Array.isArray(this._previousValue)||(this.clear(),this._previousValue=[]);const t=this._previousValue;let s=0;for(const i of e){let e=t[s];if(void 0===e){let i=this.startNode;if(s>0){i=t[s-1].endNode=document.createTextNode(""),this._insert(i)}e=new T(this.instance,i,this.endNode),t.push(e)}e.setValue(i),s++}if(0===s)this.clear(),this._previousValue=void 0;else if(s<t.length){const e=t[s-1];t.length=s,this.clear(e.endNode.previousSibling),e.endNode=this.endNode}}_setPromise(e){this._previousValue=e,e.then(t=>{this._previousValue===e&&this.setValue(t)})}clear(e=this.startNode){S(this.startNode.parentNode,e.nextSibling,this.endNode)}}const V=(e,t,s)=>{if("attribute"===t.type)return new w(e,s,t.name,t.strings);if("node"===t.type)return new T(e,s,s.nextSibling);throw new Error(`Unknown part type ${t.type}`)};class A{constructor(e,t,s){this._parts=[],this.template=e,this._partCallback=t,this._getTemplate=s}update(e){let t=0;for(const s of this._parts)void 0===s.size?(s.setValue(e[t]),t++):(s.setValue(e,t),t+=s.size)}_clone(){const e=document.importNode(this.template.element.content,!0),t=this.template.parts;if(t.length>0){const s=document.createTreeWalker(e,133,null,!1);let i=-1;for(let e=0;e<t.length;e++){const r=t[e];for(;i<r.index;)i++,s.nextNode();this._parts.push(this._partCallback(this,r,s.currentNode))}}return e}}const O=(e,t,s=null,i=null)=>{let r=t;for(;r!==s;){const t=r.nextSibling;e.insertBefore(r,i),r=t}},S=(e,t,s=null)=>{let i=t;for(;i!==s;){const t=i.nextSibling;e.removeChild(i),i=t}},E=e=>t=>{const s=`${t.type}--${e}`;let i=c.get(s);void 0===i&&(i=new Map,c.set(s,i));let r=i.get(t.strings);if(void 0===r){const s=t.getTemplateElement();"object"==typeof window.ShadyCSS&&window.ShadyCSS.prepareTemplate(s,e),r=new y(t,s),i.set(t.strings,r)}return r};const k=(e,...t)=>new d(e,t,"html",z),z=(e,t,s)=>{if("attribute"===t.type){if("on-"===t.rawName.substr(0,3)){return new class{constructor(e,t,s){this.instance=e,this.element=t,this.eventName=s}setValue(e){const t=b(this,e);t!==this._listener&&(null==t?this.element.removeEventListener(this.eventName,this):null==this._listener&&this.element.addEventListener(this.eventName,this),this._listener=t)}handleEvent(e){"function"==typeof this._listener?this._listener.call(this.element,e):"function"==typeof this._listener.handleEvent&&this._listener.handleEvent(e)}}(e,s,t.rawName.slice(3))}const i=t.name.substr(t.name.length-1);if("$"===i){const i=t.name.slice(0,-1);return new w(e,s,i,t.strings)}if("?"===i){return new class extends w{setValue(e,t){const s=this.strings;if(2!==s.length||""!==s[0]||""!==s[1])throw new Error("boolean attributes can only contain a single expression");{const s=b(this,e[t]);if(s===C)return;s?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name)}}}(e,s,t.name.slice(0,-1),t.strings)}return new class extends w{setValue(e,t){const s=this.strings;let i;this._equalToPreviousValues(e,t)||((i=2===s.length&&""===s[0]&&""===s[1]?b(this,e[t]):this._interpolate(e,t))!==C&&(this.element[this.name]=i),this._previousValues=e)}}(e,s,t.rawName,t.strings)}return V(e,t,s)};const R=new WeakMap;function j(e,t,s){e.startNode.parentNode||s.delete(t)}var I=function(e){function t(){e.call(this),this.min=0,this.max=5,this.value=0,this.emoji="üêº",this._renderEmoji=this._renderEmoji.bind(this),this._setValueOnClick=this._setValueOnClick.bind(this)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var s={properties:{configurable:!0}};return s.properties.get=function(){return{value:Number,min:Number,max:Number,emoji:String}},t.prototype._render=function(e){var t=e.min,s=e.max,i=e.value,r=[].concat(e.emoji.repeat(s));return k(['\n    <style>\n      .rating {\n        display: flex;\n        font-size: 3em;\n      }\n      .emoji {\n        cursor: pointer;\n        color: rgba(0, 0, 0, 0);\n        text-shadow: 0px 0px 0px var(--emoji-rating-unselected-color, #444);\n      }\n      .emoji.active { color: rgba(0, 0, 0, 1); }\n    </style>\n    <div class="rating" aria-role="range" aria-valuemin$="','" aria-valuemax$="','" aria-valuenow$="','">\n      ',"\n    </div>\n    "],t,s,i,function(e,t,s){let i;return 2===arguments.length?s=t:3===arguments.length&&(i=t),P(t=>{if(!(t instanceof T))throw new Error("repeat can only be used on NodeParts");let r=R.get(t);void 0===r&&(r=new Map,R.set(t,r));const n=t.startNode.parentNode;let o=-1,a=t.startNode.nextSibling;for(const l of e){let e,h;try{e=s(l,++o),h=i?i(l):o}catch(e){console.error(e);continue}let c=r.get(h);if(void 0===c){const e=document.createTextNode(""),s=document.createTextNode("");n.insertBefore(e,a),n.insertBefore(s,a),c=new T(t.instance,e,s),void 0!==h&&r.set(h,c)}else if(a!==c.startNode){const e=c.endNode.nextSibling;a!==e&&O(n,c.startNode,e,a)}else a=c.endNode.nextSibling;c.setValue(e)}a!==t.endNode&&(S(n,a,t.endNode),r.forEach(j))})}(r,function(e,t){return t},this._renderEmoji))},t.prototype._setValueOnClick=function(e){return new Promise(function(t,s){var i;return i=parseInt(e.target.dataset.idx,10)+1,this.value=i,this.renderComplete.then(function(e){try{return t(this.value)}catch(e){return s(e)}}.bind(this),s)}.bind(this))},t.prototype._renderEmoji=function(e,t){return k(['<div class$="emoji ','" data-idx$="','" on-click="','">',"</div>"],t<this.value?"active":"",t,this._setValueOnClick,e)},Object.defineProperties(t,s),t}(class extends(h(HTMLElement)){constructor(){super(...arguments),this.__renderComplete=null,this.__resolveRenderComplete=null,this.__isInvalid=!1,this.__isChanging=!1}ready(){this._root=this._createRoot(),super.ready(),this._firstRendered()}_firstRendered(){}_createRoot(){return this.attachShadow({mode:"open"})}_shouldPropertiesChange(e,t,s){const i=this._shouldRender(e,t,s);return!i&&this.__resolveRenderComplete&&this.__resolveRenderComplete(!1),i}_shouldRender(e,t,s){return!0}_propertiesChanged(e,t,s){super._propertiesChanged(e,t,s);const i=this._render(e);i&&void 0!==this._root&&this._applyRender(i,this._root),this._didRender(e,t,s),this.__resolveRenderComplete&&this.__resolveRenderComplete(!0)}_flushProperties(){this.__isChanging=!0,this.__isInvalid=!1,super._flushProperties(),this.__isChanging=!1}_shouldPropertyChange(e,t,s){const i=super._shouldPropertyChange(e,t,s);return i&&this.__isChanging&&console.trace("Setting properties in response to other properties changing "+`considered harmful. Setting '${e}' from `+`'${this._getProperty(e)}' to '${t}'.`),i}_render(e){throw new Error("_render() not implemented")}_applyRender(e,t){!function(e,t,s){_(e,t,E(s))}(e,t,this.localName)}_didRender(e,t,s){}_requestRender(){this._invalidateProperties()}_invalidateProperties(){this.__isInvalid=!0,super._invalidateProperties()}get renderComplete(){return this.__renderComplete||(this.__renderComplete=new Promise(e=>{this.__resolveRenderComplete=(t=>{this.__resolveRenderComplete=this.__renderComplete=null,e(t)})}),!this.__isInvalid&&this.__resolveRenderComplete&&Promise.resolve().then(()=>this.__resolveRenderComplete(!1))),this.__renderComplete}});customElements.define("emoji-rating",I),module.exports=I;
//# sourceMappingURL=emojiRating.js.map
